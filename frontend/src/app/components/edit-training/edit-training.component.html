<form id="frm" class="form" [formGroup]="frm" novalidate>
    <!--<h1 class="header">{{(!isNew ? 'Edit existing' : 'Add a new') + ' skill'}}</h1>-->
    <div class="form">
        <mat-form-field appearance="fill">
            <mat-label>Start</mat-label>
            <input matInput [matDatepicker]="picker1" [formControl]="ctlStart">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
        <mat-form-field appearance="fill">
            <mat-label>Finish</mat-label>
            <input matInput [matDatepicker]="picker2" [formControl]="ctlFinish">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
        <br>
        <mat-form-field>
            <input matInput placeholder="Enterprise" [formControl]="ctlEnterprise" readonly >
        </mat-form-field>
        <mat-form-field>
            <input matInput placeholder="Title" [formControl]="ctlTitle" required >
        </mat-form-field>
        <br>
        <mat-form-field>
            <input matInput placeholder="Description" [formControl]="ctlDescription" required >
        </mat-form-field>
        <br>
        <mat-form-field>
            <input matInput placeholder="Grade" [formControl]="ctlGrade" required >
            <mat-error class="field-error" *ngIf="ctlGrade.hasError">Between 0 and 100</mat-error>
        </mat-form-field>
        <br>
        <mat-form-field>
            <mat-chip-list #langList>
                <mat-chip *ngFor="let language of getLanguages" 
                                [selectable]="selectable"
                                [removable]="removable" 
                                (removed) = "removeLanguage(language)">
                    {{language.skill?.name}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input  placeholder="Languages"
                        [matChipInputFor]="langList"
                        [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                        [matChipInputAddOnBlur]="addOnBlur"
                        (matChipInputTokenEnd)="addLanguage($event)">
            </mat-chip-list>
            <mat-error class="field-error" *ngIf="langList.errorState">Already in the list</mat-error>
        </mat-form-field>
        <br>
        <mat-form-field>
            <mat-chip-list #dataList formControlName="databases">
                <mat-chip *ngFor="let database of getDatabases" 
                                [selectable]="selectable"
                                [removable]="removable" 
                                (removed) = "removeDatabase(database)">
                    {{database.skill?.name}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input matInput placeholder="Databases"
                                [matChipInputFor]="dataList"
                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                [matChipInputAddOnBlur]="addOnBlur"
                                (matChipInputTokenEnd)="addDatabase($event)">
            </mat-chip-list>
        </mat-form-field>
        <br>
        <mat-form-field>
            <mat-chip-list #frameList formControlName="frameworks">
                <mat-chip *ngFor="let framework of getFrameworks" 
                                [selectable]="selectable"
                                [removable]="removable" 
                                (removed) = "removeFramework(framework)">
                    {{framework.skill?.name}}
                    <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input matInput placeholder="Frameworks"
                                [matChipInputFor]="frameList"
                                [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                [matChipInputAddOnBlur]="addOnBlur"
                                (matChipInputTokenEnd)="addFramework($event)">
            </mat-chip-list>
        </mat-form-field>
    </div>
    <mat-error class="field-error" *ngIf="frm.errors?.dateValid">The start date must be before the finish date</mat-error>
    <div class="footer">
        <button type="submit" mat-button form="frm" [disabled]="frm.pristine || frm.invalid || frm.pending" (click)="update()">{{!isNew ? 'Update' : 'Add'}}</button>
        <button type="reset" mat-button (click)="cancel()">Cancel</button>
    </div>
</form>